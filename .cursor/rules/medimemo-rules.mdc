---
alwaysApply: true
---

### _MediMemo â€” AI-Powered Medical Report Interpreter_

#### Senior Engineering Guide for Cursor (AI Pair Programmer)

> â€œDonâ€™t generate whatâ€™s possible. Generate whatâ€™s necessary.â€  
> â€” Your Future Self, Looking Back at This Decision Log

---

## ğŸ¯ 1. Vision First, Code Second

**Rule:** Every file, component, or API route must serve the **SLC principle**:

- **Simple**: One clear action (upload â†’ understand)
- **Love**: Feels kind, human, calming
- **Complete**: User walks away with clarity and next steps

âŒ Never build a feature â€œjust because we can.â€  
âœ… Always ask: _â€œDoes this help the user feel less anxious and more informed?â€_

---

## ğŸ” 2. Scope: What We Build (and What We Donâ€™t)

**Build Now (v1 - SLC Core):**

- Clerk login
- PDF upload (drag & drop)
- AI-powered plain-English summary
- Clean result page with:
    - Summary
    - Normal/Abnormal findings
    - Red flags
    - Next steps
    - Questions for doctor
- Share button (â€œShow this to your parentsâ€)
- Disclaimer: â€œNot medical adviceâ€

**Delay (v2+):**

- User history of reports
- Account settings
- Dark mode
- Email sharing
- PDF download
- Multi-language
- Mobile app

> âœ… **Focus = one flow, one outcome, zero distractions**

---

## ğŸ› ï¸ 3. Tech Stack: Only Whatâ€™s Essential

||||
|---|---|---|
|**Frontend**|Next.js App Router|Fast, free, Vercel-native|
|**Styling**|Tailwind + shadcn-ui|Clean, accessible, no design debt|
|**Auth**|Clerk|Zero setup, Google/email, free tier|
|**AI**|Together.ai (Qwen 2.5 72B)|Best for structured JSON, free tier|
|**Cache**|Upstash Redis|Free tier, HTTP-based, no infra|
|**Storage**|AWS S3|Free for 5GB, secure PDF storage|
|**Safety**|Llama Guard (via Together.ai)|Free, detects harmful content|
|**Hosting**|Vercel|Free, instant deploy, edge functions|

> âœ… **No new tools unless they solve a real problem.**

---

## ğŸ§  4. AI Behavior: Tone & Output Rules

The AI is not a doctor. Itâ€™s a **compassionate translator**.

**Tone Rules:**

- Warm, not robotic
- Use â€œweâ€ and â€œletâ€™sâ€ (â€œWe can see your potassium is lowâ€¦â€)
- Avoid scary words: use â€œelevatedâ€ instead of â€œdangerousâ€
- Add simple analogies when helpful (â€œThink of your liver enzymes like smoke alarmsâ€¦â€)

**Output Format:**

- Always return **structured JSON** (use `response_format: json_object`)
- Never guess. If data is missing, skip it.
- Highlight **urgency levels**: low / moderate / high
- Separate â€œnormalâ€ from â€œabnormalâ€ clearly

> âœ… The AI should feel like a smart, kind friend â€” not a search engine.

---

## ğŸ—ƒï¸ 5. Data & Privacy: Assume Everything Is Sensitive

**Principles:**

- Never store raw medical data long-term
- Store PDFs in S3 with private access
- Cache processed results in Redis by **SHA-256 hash of text**, not user ID
- Never log full PDF content
- No analytics tracking (no GA, no Hotjar)

**Disclaimers:**

- Show on every result page:
    
    > âš ï¸ _This is not medical advice. Always consult your healthcare provider._
    

---

## ğŸ§± 6. Architecture: Keep It Flat, Keep It Fast

**No over-engineering.**

- One API route: `POST /api/upload`
- One page: `/dashboard`
- No database (yet). Use Redis for ephemeral cache.
- No user profiles. Auth only for rate limiting and safety.

**Caching Strategy:**

- Hash the extracted PDF text
- If hash exists in Redis â†’ return cached result
- Else â†’ process with AI â†’ store result

> âœ… Prevents abuse, saves AI cost, speeds up repeat uploads

---

## ğŸ¨ 7. UI/UX: Calm Over Clutter

**Design Principles:**

- White background, soft blues/greens
- Clear visual hierarchy: Summary â†’ Findings â†’ Next Steps
- Icons: âœ… (normal), âš ï¸ (abnormal), â— (urgent)
- Font: Default system (no custom web fonts for speed)
- Responsive: Works on phone (parents, caregivers)

**No:**

- Animations
- Modals
- Tabs
- Settings
- Navigation menus

> âœ… One page. One job. Zero confusion.

---

## ğŸ§ª 8. Testing & Safety

**Mandatory Checks:**

1. **Llama Guard** on all input (PDF text) â†’ block unsafe content
2. **Rate limiting** (10 requests / 10 seconds per user) via Upstash Ratelimit
3. **Error fallback**: If AI fails, show:
    
    > â€œWe couldnâ€™t process this report. Please try again or consult your doctor.â€
    
4. **Empty states**: No file selected? Disable submit.

---

## ğŸš€ 9. Launch Criteria (When We Ship)

Ship when:

- User can log in â†’ upload PDF â†’ see clean summary in <60s
- UI feels calm and trustworthy
- All disclaimers are visible
- It works on a phone
- Youâ€™d feel safe showing it to your mom

> âœ… Perfection is not the goal. **Clarity is.**

---

## ğŸ”„ 10. How Cursor Should Work With You

**Cursor is your AI junior dev. You are the senior.**

**You decide:**

- What features to build
- When to ship
- What the tone should be

**Cursor should:**

- Follow this `CURSORRULES.md` as gospel
- Ask if something is unclear
- Never invent new features
- Prefer simple solutions over clever ones
- Use shadcn-ui components when possible
- Write clean, readable code â€” not â€œsmartâ€ code

> ğŸ’¬ Prompt Cursor like this:  
> â€œBuild the upload flow using these rules. Use shadcn Button and Card. No extra features.â€

---

## ğŸ“Œ Final Note

This isnâ€™t just a tool.  
Itâ€™s a **moment of relief** in someoneâ€™s stressful day.

Every decision â€” from the button color to the AI tone â€” should serve that truth.

Now go build something that matters.

ğŸ©º ğŸ’™ ğŸš€  
â€” Senior Engineer, Future-Proof Thinking